#!/bin/sh
# tv_grab_file for getting your own xmltv
DESC="KLIVE EPG GRABBER"
VER="1.1"
CAP="baseline"

for arg
do
    delim=""
    case "$arg" in
    #translate --gnu-long-options to -g (short options)
       --description) printf "%s\n" "$DESC";;
       --version) printf "%s\n" "$VER";;
       --capabilities) printf "%s\n" "$CAP";;
       -d) shift;;
       #pass through anything else
       *) args="${args} ${arg}";;
    esac
done

if [ -z "$args" ]; then
    exit 0
fi

args="${args:1:${#args}}"

wget -q -O /epg2xml/klive.xml "${args}"
if [ $? -ne 0 ]; then
  echo "ERROR: Invalid download url for xmltv"
  echo "ERROR: ${args}"
  exit 2
else
  cat /epg2xml/klive.xml
fi

exit 0
