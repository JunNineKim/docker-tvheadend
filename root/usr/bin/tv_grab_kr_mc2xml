#!/bin/sh
# tv_grab_file for mc2xml
# source: https://github.com/nurtext/tv_grab_file_synology
DESC="Korea (mc2xml)"
VER="0.1"
CAP="baseline"
MC2XML_BIN="/mc2xml/mc2xml"
MC2XML_DAT="/mc2xml/mc2xml.dat"
MC2XML_XML="/mc2xml/xmltv.xml"

while [[ $# -gt 0 ]]
do
    arg="$1";
    shift;
    case "$arg" in
    #translate --gnu-long-options to -g (short options)
       --description) printf "%s\n" "$DESC";;
       --version) printf "%s\n" "$VER";;
       --capabilities) printf "%s\n" "$CAP";;
       -D) shift;;
       -o) shift;;
       -g) shift;;
       
       #pass through anything else
       *) [[ "${arg:0:1}" == "-" ]] || delim="\""
           args="${args} ${arg} ";;
    esac
done

if [ -z "$args" ]
then
    exit 0
fi

if [ ! -f $MC2XML_BIN ]
then
    exit 2
fi

if [ -f $MC2XML_DAT ]
then
    $MC2XML_BIN $args "-D $MC2XML_DAT" "-o $MC2XML_XML" > /dev/null 2>&1
else
    exit 2
fi

if [ -f $MC2XML_XML ]
then
    cat $MC2XML_XML
fi

exit 0

